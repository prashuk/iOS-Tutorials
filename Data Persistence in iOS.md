# Data Persistence in iOS

In computer science, persistence refers to the characteristic of state that outlives the process that created it. This is achieved in practice by storing the state as data in computer data storage.

## **UserDefaults**

UserDefaults are a great way to save a small amount of data. (All Data Types)

It’s not intended to save a lot of user generated data though.

Similarly simpler types like Bools and Integers can also be saved in the userDefaults.

All the values saved in userDefaults are maintained in the **plist**.

**UserDefault Limitations:** Typically it is around 4 GB but it may change in future OS releases**.**

The important thing to point out here is that the entire file is read in and written out as a whole, so if we are using UserDefaults to store a large amount of data that only changes in parts, you will be wasting a lot of time doing unnecessary I/O. For these reasons it is best to use UserDefaults for storing and retrieving small pieces of data.

## Property List

Property lists are another great way to store our data. However like userDefaults it is not intended to save large amount of data. To save data into a property list we simply call `writeToFile` method of `Array` or `Dictionary`. It will save the changes into a plist file.

## SQLite

If your application deals with large amount of data with relationships then you may want to look into SQLite.

SQLite is lightweight embedded relational database.

It is serverless, zero-configuration, transactional SQL database engine.

In other words it is embedded in the application and therefore very fast.

## Keychain

If you want to save highly sensitive and secure data like passwords and secret codes then there is a good news for you.

The API is a little bit low level, but Apple has created a very good wrapper for using the keychain.

Furthermore, it’s not ARC code. So in order to use it, you have to disable ARC for these source files.

## Saving Files

Of course you can also directly save all types of files to the file system. However, you can just access the file system within the app container due to security reasons. Basically there are three folders within the app container:

- *Documents*: This is the perfect place to save user generated content. It’s also backed up to the iCloud automatically.
- *Library:* In this folder you can put files that are not generated by the user and that should persist between launches of the app.
- *tmp:* In this folder you can save files that the app just needs temporarily. They can be deleted by the operation system when the app is not running.

## CoreData

Core Data, Apple’s solution for persistence, allows applications to persist data of any form and retrieve it.

Core Data isn’t technically a database, although it usually stores its data in one (an SQLite database, to be precise).

It’s not an object-relational mapper (ORM), though it can feel like one.

It’s truly an object graph, allowing you to create, store, and retrieve objects that have attributes and relationships to other objects.

You can perform undo and redo operations. It’s also very performant and Core Data lazy loads the data.